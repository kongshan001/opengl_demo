# OpenGL Demo 多角色协作工作流

## 角色定义

### 🎯 策划 (Planner)
- 职责：定义需求、优先级排序、验收标准
- 输出：需求文档、任务分解

### 💻 程序 (Developer)
- 职责：高质量实现需求、代码编写、重构
- 工具：OpenClaw / Claude Code / coding-agent skill
- 输出：代码实现、单元测试骨架

### 🔍 代码审核人 (Reviewer)
- 职责：代码质量审核、架构评审、安全性检查
- 检查项：
  - 代码规范（命名、注释、格式）
  - 设计模式应用
  - 性能考量
  - 内存安全
  - 异常处理
- 输出：审核报告、修改建议

### 🧪 QA (Tester)
- 职责：编写单元测试、集成测试、确保100%覆盖率
- 工具：Google Test
- 输出：测试用例、覆盖率报告

### 📝 文档 (Documenter)
- 职责：维护接口文档、架构文档、核心类职责
- 输出：API文档、架构图、变更日志

## 工作流程

```
策划提需求 → 程序实现 → 代码审核 → QA测试 → 文档整理 → Git提交 → 下一需求
                ↓            ↓         ↓
              修改         通过/驳回   覆盖率检查
```

## 需求列表（第一批：10个）

### 需求 1：光照系统增强 ✅ 已完成
- **描述**：实现 Phong 光照模型（环境光 + 漫反射 + 镜面反射）
- **优先级**：高
- **验收标准**：
  - ✅ 支持多个点光源（最多8个）
  - ✅ 支持方向光
  - ✅ 材质支持 shininess 参数
- **完成日期**：2026-02-22
- **测试覆盖**：44个单元测试，100%通过

### 需求 2：摄像机系统完善
- **描述**：增强摄像机功能
- **优先级**：高
- **验收标准**：
  - 支持第一人称/第三人称视角切换
  - 支持摄像机路径动画
  - 支持平滑跟随目标

### 需求 3：模型加载增强
- **描述**：支持更多3D模型格式
- **优先级**：中
- **验收标准**：
  - 支持 OBJ 格式完善
  - 支持 FBX 格式（基础）
  - 支持模型层级结构

### 需求 4：粒子系统
- **描述**：实现基础粒子系统
- **优先级**：中
- **验收标准**：
  - 支持粒子发射器
  - 支持粒子生命周期
  - 支持重力/风力影响

### 需求 5：阴影映射
- **描述**：实现实时阴影
- **优先级**：高
- **验收标准**：
  - 支持方向光阴影
  - 阴影质量可调
  - PCF 软阴影

### 需求 6：天空盒
- **描述**：实现天空盒背景
- **优先级**：中
- **验收标准**：
  - 支持立方体贴图
  - 支持动态天空盒
  - 日夜循环效果

### 需求 7：后处理效果
- **描述**：实现屏幕后处理
- **优先级**：中
- **验收标准**：
  - 泛光效果 (Bloom)
  - 色调映射
  - FXAA 抗锯齿

### 需求 8：GUI 系统
- **描述**：集成 Dear ImGui 调试界面
- **优先级**：高
- **验收标准**：
  - 实时参数调整
  - 性能统计显示
  - 场景节点树

### 需求 9：场景管理系统
- **描述**：实现场景图管理
- **优先级**：高
- **验收标准**：
  - 场景节点层级
  - 父子变换继承
  - 场景序列化/反序列化

### 需求 10：性能优化
- **描述**：渲染性能优化
- **优先级**：高
- **验收标准**：
  - 视锥体剔除
  - 遮挡剔除
  - 实例化渲染
  - 批处理

---

## 执行规范

每次需求完成后必须包含：
1. ✅ 代码实现
2. ✅ 代码审核通过
3. ✅ 单元测试（覆盖率 100%）
4. ✅ 接口文档更新
5. ✅ 架构文档更新
6. ✅ Git 提交（带详细 commit message）
7. ✅ 推送到远程仓库
